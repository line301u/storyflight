import { visit } from "unist-util-visit";
import slugger from "github-slugger";
function createCollectHeaders() {
  const headers = [];
  function rehypeCollectHeaders() {
    return function(tree) {
      visit(tree, (node) => {
        var _a, _b;
        if (node.type !== "element")
          return;
        const { tagName } = node;
        if (tagName[0] !== "h")
          return;
        const [_, level] = (_a = tagName.match(/h([0-6])/)) != null ? _a : [];
        if (!level)
          return;
        const depth = Number.parseInt(level);
        let text = "";
        visit(node, "text", (child) => {
          text += child.value;
        });
        let slug = ((_b = node == null ? void 0 : node.properties) == null ? void 0 : _b.id) || slugger.slug(text);
        node.properties = node.properties || {};
        node.properties.id = slug;
        headers.push({ depth, slug, text });
      });
    };
  }
  return {
    headers,
    rehypeCollectHeaders
  };
}
export {
  createCollectHeaders as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL3JlaHlwZS1jb2xsZWN0LWhlYWRlcnMudHMiXSwKICAibWFwcGluZ3MiOiAiQUFBQTtBQUVBO0FBR2UsZ0NBQWdDO0FBQzdDLFFBQU0sVUFBaUI7QUFFdkIsa0NBQWdDO0FBQzlCLFdBQU8sU0FBVSxNQUFZO0FBQzNCLFlBQU0sTUFBTSxDQUFDLFNBQVM7QUFWNUI7QUFXUSxZQUFJLEtBQUssU0FBUztBQUFXO0FBQzdCLGNBQU0sRUFBRSxZQUFZO0FBQ3BCLFlBQUksUUFBUSxPQUFPO0FBQUs7QUFDeEIsY0FBTSxDQUFDLEdBQUcsU0FBUyxjQUFRLE1BQU0sZ0JBQWQsWUFBNkI7QUFDaEQsWUFBSSxDQUFDO0FBQU87QUFDWixjQUFNLFFBQVEsT0FBTyxTQUFTO0FBRTlCLFlBQUksT0FBTztBQUVYLGNBQU0sTUFBTSxRQUFRLENBQUMsVUFBVTtBQUM3QixrQkFBUSxNQUFNO0FBQUE7QUFHaEIsWUFBSSxPQUFPLG9DQUFNLGVBQU4sbUJBQWtCLE9BQU0sUUFBUSxLQUFLO0FBRWhELGFBQUssYUFBYSxLQUFLLGNBQWM7QUFDckMsYUFBSyxXQUFXLEtBQUs7QUFDckIsZ0JBQVEsS0FBSyxFQUFFLE9BQU8sTUFBTTtBQUFBO0FBQUE7QUFBQTtBQUtsQyxTQUFPO0FBQUEsSUFDTDtBQUFBLElBQ0E7QUFBQTtBQUFBOyIsCiAgIm5hbWVzIjogW10KfQo=
